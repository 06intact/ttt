#------------------------------------------------------------------------------
# TravisCI configuration file for solidity.
#
# The documentation for solidity is hosted at:
#
# http://solidity.readthedocs.org
#
# ------------------------------------------------------------------------------
# This file is part of solidity.
#
# solidity is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# solidity is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with solidity.  If not, see <http://www.gnu.org/licenses/>
#
# (c) 2016 solidity contributors.
#------------------------------------------------------------------------------

language: cpp
branches:
    # We need to whitelist the branches which we want to have "push" automation,
    # this includes tags (which are treated as branches by travis).
    # Pull request automation is not constrained to this set of branches.
    only:
        - develop
        - release
        - /^v[0-9]/
matrix:
    include:
        # Ubuntu 14.04 LTS "Trusty Tahr"
      - os: linux
        dist: trusty 
        sudo: required
        compiler:
          - clang
          - gcc
        # Documentation target, which generates documentation using Phoenix / ReadTheDocs.
      - os: linux
        dist: trusty
        sudo: required
        env:
            - TRAVIS_DOCS=On
            - TRAVIS_RELEASE=Off
            - TRAVIS_TESTS=Off
        # Emscripten target, which compiles 'solc' to javascript and uploads the resulting .js
        # files to https://github.com/ethereum/solc-bin.  These binaries are used in Browser-Solidity
        # and in other Ethereum web-based development contexts.
      - os: linux
        dist: trusty
        sudo: required
        compiler: gcc
        node_js: stable
        services:
            - docker
        before_install:
            - docker pull trzeci/emscripten:sdk-tag-1.35.4-64bit
        env:
            - TRAVIS_EMSCRIPTEN=On
            - TRAVIS_INSTALL_DEPS=Off
            - TRAVIS_RELEASE=Off
            - TRAVIS_TESTS=Off
        # Yosemite
      - os: osx
        osx_image: xcode6.4
        compiler:
          - clang
        # El Capitan
      - os: osx
        osx_image: xcode7.3
        compiler:
          - clang
      - os: osx
        osx_image: xcode8
        compiler:
          - clang
        # Sierra
      - os: osx
        osx_image: xcode8.1
        compiler:
          - clang
      - os: osx
        osx_image: xcode8.2
        compiler:
          - clang